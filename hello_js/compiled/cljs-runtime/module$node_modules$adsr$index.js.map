{
"version":3,
"file":"module$node_modules$adsr$index.js",
"lineCount":6,
"mappings":"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",
"sources":["node_modules/adsr/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$adsr$index\"] = function(global,require,module,exports) {\nmodule.exports = ADSR\n\nfunction ADSR(audioContext){\n  var node = audioContext.createGain()\n\n  var voltage = node._voltage = getVoltage(audioContext)\n  var value = scale(voltage)\n  var startValue = scale(voltage)\n  var endValue = scale(voltage)\n\n  node._startAmount = scale(startValue)\n  node._endAmount = scale(endValue)\n\n  node._multiplier = scale(value)\n  node._multiplier.connect(node)\n  node._startAmount.connect(node)\n  node._endAmount.connect(node)\n\n  node.value = value.gain\n  node.startValue = startValue.gain\n  node.endValue = endValue.gain\n\n  node.startValue.value = 0\n  node.endValue.value = 0\n\n  Object.defineProperties(node, props)\n  return node\n}\n\nvar props = {\n\n  attack: { value: 0, writable: true },\n  decay: { value: 0, writable: true },\n  sustain: { value: 1, writable: true },\n  release: {value: 0, writable: true },\n\n  getReleaseDuration: {\n    value: function(){\n      return this.release\n    }\n  },\n\n  start: {\n    value: function(at){\n      var target = this._multiplier.gain\n      var startAmount = this._startAmount.gain\n      var endAmount = this._endAmount.gain\n\n      this._voltage.start(at)\n      this._decayFrom = this._decayFrom = at+this.attack\n      this._startedAt = at\n\n      var sustain = this.sustain\n\n      target.cancelScheduledValues(at)\n      startAmount.cancelScheduledValues(at)\n      endAmount.cancelScheduledValues(at)\n\n      endAmount.setValueAtTime(0, at)\n\n      if (this.attack){\n        target.setValueAtTime(0, at)\n        target.linearRampToValueAtTime(1, at + this.attack)\n\n        startAmount.setValueAtTime(1, at)\n        startAmount.linearRampToValueAtTime(0, at + this.attack)\n      } else {\n        target.setValueAtTime(1, at)\n        startAmount.setValueAtTime(0, at)\n      }\n\n      if (this.decay){\n        target.setTargetAtTime(sustain, this._decayFrom, getTimeConstant(this.decay))\n      }\n    }\n  },\n\n  stop: {\n    value: function(at, isTarget){\n      if (isTarget){\n        at = at - this.release\n      }\n\n      var endTime = at + this.release\n      if (this.release){\n\n        var target = this._multiplier.gain\n        var startAmount = this._startAmount.gain\n        var endAmount = this._endAmount.gain\n\n        target.cancelScheduledValues(at)\n        startAmount.cancelScheduledValues(at)\n        endAmount.cancelScheduledValues(at)\n\n        var expFalloff = getTimeConstant(this.release)\n\n        // truncate attack (required as linearRamp is removed by cancelScheduledValues)\n        if (this.attack && at < this._decayFrom){\n          var valueAtTime = getValue(0, 1, this._startedAt, this._decayFrom, at)\n          target.linearRampToValueAtTime(valueAtTime, at)\n          startAmount.linearRampToValueAtTime(1-valueAtTime, at)\n          startAmount.setTargetAtTime(0, at, expFalloff)\n        }\n\n        endAmount.setTargetAtTime(1, at, expFalloff)\n        target.setTargetAtTime(0, at, expFalloff)\n      }\n\n      this._voltage.stop(endTime)\n      return endTime\n    }\n  },\n\n  onended: {\n    get: function(){\n      return this._voltage.onended\n    },\n    set: function(value){\n      this._voltage.onended = value\n    }\n  }\n\n}\n\nvar flat = new Float32Array([1,1])\nfunction getVoltage(context){\n  var voltage = context.createBufferSource()\n  var buffer = context.createBuffer(1, 2, context.sampleRate)\n  buffer.getChannelData(0).set(flat)\n  voltage.buffer = buffer\n  voltage.loop = true\n  return voltage\n}\n\nfunction scale(node){\n  var gain = node.context.createGain()\n  node.connect(gain)\n  return gain\n}\n\nfunction getTimeConstant(time){\n  return Math.log(time+1)/Math.log(100)\n}\n\nfunction getValue(start, end, fromTime, toTime, at){\n  var difference = end - start\n  var time = toTime - fromTime\n  var truncateTime = at - fromTime\n  var phase = truncateTime / time\n  var value = start + phase * difference\n\n  if (value <= start) {\n      value = start\n  }\n  if (value >= end) {\n      value = end\n  }\n\n  return value\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","scale","node","gain","context","createGain","connect","ADSR","audioContext","voltage","createBufferSource","buffer","createBuffer","sampleRate","getChannelData","set","flat","loop","_voltage","value","startValue","endValue","_startAmount","_endAmount","_multiplier","Object","defineProperties","props","attack","writable","decay","sustain","release","getReleaseDuration","start","at","target","startAmount","endAmount","_decayFrom","_startedAt","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","setTargetAtTime","Math","log","stop","isTarget","endTime","expFalloff","fromTime","end","valueAtTime","onended","get","Float32Array"]
}
