{
"version":3,
"file":"module$node_modules$glslify_bundle$index.js",
"lineCount":8,
"mappings":"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",
"sources":["node_modules/glslify-bundle/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$glslify_bundle$index\"] = function(global,require,module,exports) {\n/* eslint-disable no-redeclare */\r\n\r\nvar hash = require('murmurhash-js/murmurhash3_gc')\r\nvar trim = require('glsl-token-whitespace-trim')\r\nvar tokenize = require('glsl-tokenizer/string')\r\nvar inject = require('glsl-inject-defines')\r\nvar defines = require('glsl-token-defines')\r\nvar descope = require('glsl-token-descope')\r\nvar clean = require('./lib/clean-suffixes')\r\nvar string = require('glsl-token-string')\r\nvar scope = require('glsl-token-scope')\r\nvar depth = require('glsl-token-depth')\r\nvar topoSort = require('./lib/topo-sort')\r\nvar copy = require('shallow-copy')\r\n\r\nmodule.exports = function (deps) {\r\n  return inject(Bundle(deps).src, {\r\n    GLSLIFY: 1\r\n  })\r\n}\r\n\r\nfunction Bundle (deps) {\r\n  if (!(this instanceof Bundle)) return new Bundle(deps)\r\n\r\n  // Reorder dependencies topologically\r\n  deps = topoSort(deps)\r\n\r\n  this.depList = deps\r\n  this.depIndex = indexBy(deps, 'id')\r\n  this.exported = {}\r\n  this.cache = {}\r\n  this.varCounter = 0\r\n\r\n  this.src = []\r\n\r\n  for (var i = 0; i < deps.length; i++) {\r\n    this.preprocess(deps[i])\r\n  }\r\n\r\n  for (var i = 0; i < deps.length; i++) {\r\n    if (deps[i].entry) {\r\n      this.src = this.src.concat(this.bundle(deps[i]))\r\n    }\r\n  }\r\n\r\n  this.src = string(this.src)\r\n  this.src = string(clean(trim(tokenize(this.src))))\r\n}\r\n\r\nvar proto = Bundle.prototype\r\n\r\nproto.preprocess = function (dep) {\r\n  var tokens = tokenize(dep.source)\r\n  var imports = []\r\n  var exports = null\r\n\r\n  depth(tokens)\r\n  scope(tokens)\r\n\r\n  for (var i = 0; i < tokens.length; i++) {\r\n    var token = tokens[i]\r\n    if (token.type !== 'preprocessor') continue\r\n    if (!glslifyPreprocessor(token.data)) continue\r\n\r\n    var exported = glslifyExport(token.data)\r\n    var imported = glslifyImport(token.data)\r\n\r\n    if (exported) {\r\n      exports = exported[1]\r\n      tokens.splice(i--, 1)\r\n    } else if (imported) {\r\n      var name = imported[1]\r\n      var maps = imported[2].split(/\\s?,\\s?/g)\r\n      var path = maps.shift()\r\n        .trim()\r\n        .replace(/^'|'$/g, '')\r\n        .replace(/^\"|\"$/g, '')\r\n      var target = this.depIndex[dep.deps[path]]\r\n      imports.push({\r\n        name: name,\r\n        path: path,\r\n        target: target,\r\n        maps: toMapping(maps),\r\n        index: i\r\n      })\r\n      tokens.splice(i--, 1)\r\n    }\r\n  }\r\n\r\n  var eof = tokens[tokens.length - 1]\r\n  if (eof && eof.type === 'eof') {\r\n    tokens.pop()\r\n  }\r\n\r\n  if (dep.entry) {\r\n    exports = exports || 'main'\r\n  }\r\n\r\n  if (!exports) {\r\n    throw new Error(dep.file + ' does not export any symbols')\r\n  }\r\n\r\n  dep.parsed = {\r\n    tokens: tokens,\r\n    imports: imports,\r\n    exports: exports\r\n  }\r\n}\r\n\r\nproto.bundle = function (entry) {\r\n  var resolved = {}\r\n  var result = resolve(entry, [])[1]\r\n\r\n  return result\r\n\r\n  function resolve (dep, bindings) {\r\n    // Compute suffix for module\r\n    bindings.sort()\r\n    var ident = bindings.join(':') + ':' + dep.id\r\n    var suffix = '_' + hash(ident)\r\n\r\n    if (dep.entry) {\r\n      suffix = ''\r\n    }\r\n\r\n    // Test if export is already resolved\r\n    var exportName = dep.parsed.exports + suffix\r\n    if (resolved[exportName]) {\r\n      return [exportName, []]\r\n    }\r\n\r\n    // Initialize map for variable renamings based on bindings\r\n    var rename = {}\r\n    for (var i = 0; i < bindings.length; ++i) {\r\n      var binding = bindings[i]\r\n      rename[binding[0]] = binding[1]\r\n    }\r\n\r\n    // Resolve all dependencies\r\n    var imports = dep.parsed.imports\r\n    var edits = []\r\n    for (var i = 0; i < imports.length; ++i) {\r\n      var data = imports[i]\r\n\r\n      var importMaps = data.maps\r\n      var importName = data.name\r\n      var importTarget = data.target\r\n\r\n      var importBindings = Object.keys(importMaps).map(function (id) {\r\n        var value = importMaps[id]\r\n\r\n        // floats/ints should not be renamed\r\n        if (value.match(/^\\d+(?:\\.\\d+?)?$/g)) {\r\n          return [id, value]\r\n        }\r\n\r\n        // properties (uVec.x, ray.origin, ray.origin.xy etc.) should\r\n        // have their host identifiers renamed\r\n        var parent = value.match(/^([^.]+)\\.(.+)$/)\r\n        if (parent) {\r\n          return [id, (rename[parent[1]] || (parent[1] + suffix)) + '.' + parent[2]]\r\n        }\r\n\r\n        return [id, rename[value] || (value + suffix)]\r\n      })\r\n\r\n      var importTokens = resolve(importTarget, importBindings)\r\n      rename[importName] = importTokens[0]\r\n      edits.push([data.index, importTokens[1]])\r\n    }\r\n\r\n    // Rename tokens\r\n    var parsedTokens = dep.parsed.tokens.map(copy)\r\n    var parsedDefs = defines(parsedTokens)\r\n    var tokens = descope(parsedTokens, function (local, token) {\r\n      if (parsedDefs[local]) return local\r\n      if (rename[local]) return rename[local]\r\n\r\n      return local + suffix\r\n    })\r\n\r\n    // Insert edits\r\n    edits.sort(function (a, b) {\r\n      return b[0] - a[0]\r\n    })\r\n\r\n    for (var i = 0; i < edits.length; ++i) {\r\n      var edit = edits[i]\r\n      tokens = tokens.slice(0, edit[0])\r\n        .concat(edit[1])\r\n        .concat(tokens.slice(edit[0]))\r\n    }\r\n\r\n    resolved[exportName] = true\r\n    return [exportName, tokens]\r\n  }\r\n}\r\n\r\nfunction glslifyPreprocessor (data) {\r\n  return /#pragma glslify:/.test(data)\r\n}\r\n\r\nfunction glslifyExport (data) {\r\n  return /#pragma glslify:\\s*export\\(([^)]+)\\)/.exec(data)\r\n}\r\n\r\nfunction glslifyImport (data) {\r\n  return /#pragma glslify:\\s*([^=\\s]+)\\s*=\\s*require\\(([^)]+)\\)/.exec(data)\r\n}\r\n\r\nfunction indexBy (deps, key) {\r\n  return deps.reduce(function (deps, entry) {\r\n    deps[entry[key]] = entry\r\n    return deps\r\n  }, {})\r\n}\r\n\r\nfunction toMapping (maps) {\r\n  if (!maps) return false\r\n\r\n  return maps.reduce(function (mapping, defn) {\r\n    defn = defn.split(/\\s?=\\s?/g)\r\n\r\n    var expr = defn.pop()\r\n\r\n    defn.forEach(function (key) {\r\n      mapping[key] = expr\r\n    })\r\n\r\n    return mapping\r\n  }, {})\r\n}\r\n\n};"],
"names":["shadow$provide","global","require","module","exports","Bundle","deps","depList","topoSort","depIndex","indexBy","exported","cache","varCounter","src","i","length","preprocess","entry","concat","bundle","string","clean","trim","tokenize","key","reduce","toMapping","maps","mapping","defn","split","expr","pop","forEach","hash","inject","defines","descope","scope","depth","copy","module.exports","GLSLIFY","proto","prototype","proto.preprocess","dep","tokens","source","imports","token","type","test","data","exec","imported","splice","name","path","shift","replace","push","target","index","eof","Error","file","parsed","proto.bundle","resolve","bindings","sort","ident","join","id","suffix","exportName","resolved","rename","binding","edits","importMaps","importName","importTarget","importBindings","Object","keys","map","value","match","parent","importTokens","parsedTokens","parsedDefs","local","a","b","edit","slice","result"]
}
