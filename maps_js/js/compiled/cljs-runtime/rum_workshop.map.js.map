{"version":3,"sources":["rum_workshop/map.cljs"],"mappings":";;;;AAUA,AAACA;AAED,AAAKC,AAAa,AAAA,AAAiBC;AACnC,AAAKC,AAAS,AAAA,AAAA,AAAA,AAACC;AACf,AAAKC,AAAS,AAAA,AAACD;AACf,AAAA,AAAAE,AAAAC,AAAA,AAAUE;AAAV,AAAA,AAAA,AAAAD,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAA,AAEG,AAAKE;AAAL,AAEE,AACC,AAAA,AAACC,AACD,AAAA,AACC,AAAA,AAAA,AAAA,AAAA,AAACC,AAKD,AAAA,AAAAC,AAACC,AAASX;AAZjB;AAkBA,AAAA,AAAMY;AAAN,AACE,AAAA;AAAA,AAAiB,AAAA,AAACC;;AAAlB;AAAA,AACkB,AAAA,AAACA;;AADnB;AAAA,AAEe,AAAA,AAACA;;AAFhB;AAAA,AAGiB,AAAA,AAACA;;AAHlB;AAAA,AAKU,AAACA,AACA,AAAA,AAAAC,AAACC;AAAD,AACE,AAAAD,AAACE,AAAOhB;AACTa;;AACF,AAACA,AACA,AAAA,AAACI,AAEA,AAAA,AAAAP,AAACC,AAASX;;AAZtB,AAcE,AAAA,AAAA,AAACkB,AACUC;;AAEX,AAAA,AAAA,AAACD,AACAE;;AACD,AAAA,AAAA,AAACF,AAGAG;;AACD,AAAA,AAAA,AAACH,AAGAI;;AACD,AAAA,AAAA,AAACJ,AAGAK;;AAEL,AAAA,AAAMC;AAAN,AACE,AAACZ;;AACD,AAACa,AAAU,AAACnB,AAAKR;;AAEnB,AAAA,AAAe4B;AAAf,AACE,AAACF","names":["cljs.core/enable-console-print!","rum-workshop.map/root-element","js/document","rum-workshop.map/position","cljs.core.atom","rum-workshop.map/location","rum.core/lazy-build","rum.core/build-defc","daiquiri.core/create-element","rum-workshop.map/app","state","js/module$node_modules$esri_leaflet$dist$esri_leaflet_debug.basemapLayer","js/module$node_modules$leaflet$dist$leaflet_src.map","cljs.core/deref","cljs.core/clj->js","rum-workshop.map/init-keybindings","js/console.log","p1__27895#","js/navigator.geolocation.getCurrentPosition","cljs.core/reset!","js/document.querySelector","keybind.core/bind!","space","left","right","up","down","rum-workshop.map/refresh","rum.core/mount","rum-workshop.map/init"],"sourcesContent":["(ns rum-workshop.map\n  (:require [rum.core :as rum]\n            [keybind.core :as key]\n            ;; https://shadow-cljs.github.io/docs/UsersGuide.html#_conditional_reading\n            ;; shadow-cljs example for import libraries\n            [\"react-leaflet\" :as react-leaflet]\n            [\"leaflet\" :as leaflet]\n            [\"esri-leaflet\" :as esri-leaflet]))\n;; https://gist.github.com/orolle/21902cc4a58f2a97c7ab27c2fb7b2503\n\n(enable-console-print!)\n\n(def root-element (.getElementById js/document \"app\"))\n(def position (atom [51.505, -0.09]))\n(def location (atom []))\n(rum/defc app <\n  {:did-mount\n   (fn [state]\n     \n     (.addTo\n      (esri-leaflet/basemapLayer \"Gray\")\n      (.setView\n       (leaflet/map\n        \"mapid\"\n        #js\n        {:preferCanvas true\n         :keyboard false})\n       (clj->js @position), 13)) )}\n  []\n  [:div#mapid\n   ]\n  )\n\n(defn init-keybindings []\n  (letfn [(left [] (js/console.log \"LEFT\"))\n          (right [] (js/console.log \"RIGHT\"))\n          (up [] (js/console.log \"UP\"))\n          (down [] (js/console.log \"DOWN\"))\n          (space []\n            (js/console.log\n             (js/navigator.geolocation.getCurrentPosition\n              #(reset! position  %)\n              js/console.log))\n            (js/console.log\n             (js/document.querySelector\n              \"div#mapid\"\n              (clj->js @position)))\n            )]\n    (key/bind! \"space\" ::left\n               space)\n\n    (key/bind! \"left\" ::left\n     left)\n    (key/bind!\n     \"right\"\n     ::right\n     right)\n    (key/bind!\n     \"up\"\n     ::up\n     up)\n    (key/bind!\n     \"down\"\n     ::down\n     down)))\n\n(defn refresh []\n  (init-keybindings)\n  (rum/mount (app) root-element))\n\n(defn ^:export init []\n  (refresh))\n\n"]}