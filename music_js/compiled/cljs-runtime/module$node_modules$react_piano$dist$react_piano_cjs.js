shadow$provide.module$node_modules$react_piano$dist$react_piano_cjs=function(global,require,module,exports){function _interopDefault(ex){return ex&&"object"===typeof ex&&"default"in ex?ex["default"]:ex}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=
!0;"value"in descriptor&&(descriptor.writable=!0);Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){protoProps&&_defineProperties(Constructor.prototype,protoProps);staticProps&&_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function _extends(){_extends=Object.assign||
function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i],key;for(key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};return _extends.apply(this,arguments)}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,
configurable:!0}});superClass&&_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o$jscomp$0,p){_setPrototypeOf=Object.setPrototypeOf||function(o,p){o.__proto__=p;return o};return _setPrototypeOf(o$jscomp$0,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return self}function _possibleConstructorReturn(self,call){return!call||"object"!==typeof call&&"function"!==typeof call?_assertThisInitialized(self):call}function getAttributes(midiNumber){midiNumber=midiNumberAttributesCache[midiNumber];if(!midiNumber)throw Error("Invalid MIDI number");return midiNumber}Object.defineProperty(exports,"__esModule",{value:!0});var range=_interopDefault(require("module$node_modules$just_range$index")),React=_interopDefault(require("module$node_modules$react$index"));
global=_interopDefault(require("module$node_modules$prop_types$index"));var classNames=_interopDefault(require("module$node_modules$classnames$index")),difference=_interopDefault(require("module$node_modules$lodash_DOT_difference$index")),SORTED_PITCHES="C Db D Eb E F Gb G Ab A Bb B".split(" "),ACCIDENTAL_PITCHES=["Db","Eb","Gb","Ab","Bb"],PITCH_INDEXES={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},NOTE_REGEX=/([a-g])([#b]?)(\d+)/,midiNumberAttributesCache=
function(){return range(12,128).reduce(function(cache,midiNumber){var JSCompiler_inline_result=Math.floor((midiNumber-12)/12);var pitchName=SORTED_PITCHES[(midiNumber-12)%12];JSCompiler_inline_result={note:"".concat(pitchName).concat(JSCompiler_inline_result),pitchName,octave:JSCompiler_inline_result,midiNumber,isAccidental:ACCIDENTAL_PITCHES.includes(pitchName)};cache[midiNumber]=JSCompiler_inline_result;return cache},{})}();require=range(12,128).filter(function(midiNumber){return!getAttributes(midiNumber).isAccidental});
var MidiNumbers={fromNote:function(note){if(!note)throw Error("Invalid note argument");note=NOTE_REGEX.exec(note.toLowerCase());if(!note)throw Error("Invalid note argument");var JSCompiler_inline_result=Array.isArray(note)?note:void 0;if(!JSCompiler_inline_result){JSCompiler_inline_result=[];var _n=!0,_d=!1,_e=void 0;try{for(var _i=note[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(JSCompiler_inline_result.push(_s.value),4!==JSCompiler_inline_result.length);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&
null!=_i["return"])_i["return"]()}finally{if(_d)throw _e;}}}if(!(_s=JSCompiler_inline_result))throw new TypeError("Invalid attempt to destructure non-iterable instance");note=_s[2];_i=_s[3];_s="".concat(_s[1].toUpperCase()).concat(note);_s=PITCH_INDEXES[_s];if(null==_s)throw Error("Invalid note argument");return 12+_s+12*parseInt(_i,10)},getAttributes,MIN_MIDI_NUMBER:12,MAX_MIDI_NUMBER:127,NATURAL_MIDI_NUMBERS:require},Key=function(_React$Component){function Key(){var _getPrototypeOf2;_classCallCheck(this,
Key);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Key)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"onPlayNoteInput",function(){_this.props.onPlayNoteInput(_this.props.midiNumber)});_defineProperty(_assertThisInitialized(_this),"onStopNoteInput",function(){_this.props.onStopNoteInput(_this.props.midiNumber)});return _this}
_inherits(Key,_React$Component);_createClass(Key,[{key:"getAbsoluteKeyPosition",value:function(midiNumber){midiNumber=MidiNumbers.getAttributes(midiNumber);return this.props.pitchPositions[midiNumber.pitchName]+7*midiNumber.octave}},{key:"getRelativeKeyPosition",value:function(midiNumber){return this.getAbsoluteKeyPosition(midiNumber)-this.getAbsoluteKeyPosition(this.props.noteRange.first)}},{key:"render",value:function(){var _this$props=this.props,naturalKeyWidth=_this$props.naturalKeyWidth,accidentalWidthRatio=
_this$props.accidentalWidthRatio,midiNumber=_this$props.midiNumber,gliss=_this$props.gliss,useTouchEvents=_this$props.useTouchEvents,accidental=_this$props.accidental,children=_this$props.children;return React.createElement("div",{className:classNames("ReactPiano__Key",{"ReactPiano__Key--accidental":accidental,"ReactPiano__Key--natural":!accidental,"ReactPiano__Key--disabled":_this$props.disabled,"ReactPiano__Key--active":_this$props.active}),style:{left:"".concat(this.getRelativeKeyPosition(midiNumber)*
naturalKeyWidth*100,"%"),width:"".concat(100*(accidental?accidentalWidthRatio*naturalKeyWidth:naturalKeyWidth),"%")},onMouseDown:useTouchEvents?null:this.onPlayNoteInput,onMouseUp:useTouchEvents?null:this.onStopNoteInput,onMouseEnter:gliss?this.onPlayNoteInput:null,onMouseLeave:this.onStopNoteInput,onTouchStart:useTouchEvents?this.onPlayNoteInput:null,onTouchCancel:useTouchEvents?this.onStopNoteInput:null,onTouchEnd:useTouchEvents?this.onStopNoteInput:null},React.createElement("div",{className:"ReactPiano__NoteLabelContainer"},
children))}}]);return Key}(React.Component);_defineProperty(Key,"propTypes",{midiNumber:global.number.isRequired,naturalKeyWidth:global.number.isRequired,gliss:global.bool.isRequired,useTouchEvents:global.bool.isRequired,accidental:global.bool.isRequired,active:global.bool.isRequired,disabled:global.bool.isRequired,onPlayNoteInput:global.func.isRequired,onStopNoteInput:global.func.isRequired,accidentalWidthRatio:global.number.isRequired,pitchPositions:global.object.isRequired,children:global.node});
_defineProperty(Key,"defaultProps",{accidentalWidthRatio:.65,pitchPositions:{C:0,Db:.55,D:1,Eb:1.8,E:2,F:3,Gb:3.5,G:4,Ab:4.7,A:5,Bb:5.85,B:6}});var Keyboard$jscomp$0=function(_React$Component){function Keyboard(){_classCallCheck(this,Keyboard);return _possibleConstructorReturn(this,_getPrototypeOf(Keyboard).apply(this,arguments))}_inherits(Keyboard,_React$Component);_createClass(Keyboard,[{key:"getMidiNumbers",value:function(){return range(this.props.noteRange.first,this.props.noteRange.last+1)}},
{key:"getNaturalKeyCount",value:function(){return this.getMidiNumbers().filter(function(number){return!MidiNumbers.getAttributes(number).isAccidental}).length}},{key:"getNaturalKeyWidth",value:function(){return 1/this.getNaturalKeyCount()}},{key:"getWidth",value:function(){return this.props.width?this.props.width:"100%"}},{key:"getHeight",value:function(){if(!this.props.width)return"100%";var keyWidth=this.props.width*this.getNaturalKeyWidth();return"".concat(keyWidth/this.props.keyWidthToHeight,
"px")}},{key:"render",value:function(){var _this=this,naturalKeyWidth=this.getNaturalKeyWidth();return React.createElement("div",{className:classNames("ReactPiano__Keyboard",this.props.className),style:{width:this.getWidth(),height:this.getHeight()}},this.getMidiNumbers().map(function(midiNumber){var isAccidental=MidiNumbers.getAttributes(midiNumber).isAccidental,isActive=!_this.props.disabled&&_this.props.activeNotes.includes(midiNumber);return React.createElement(Key,{naturalKeyWidth,midiNumber,
noteRange:_this.props.noteRange,active:isActive,accidental:isAccidental,disabled:_this.props.disabled,onPlayNoteInput:_this.props.onPlayNoteInput,onStopNoteInput:_this.props.onStopNoteInput,gliss:_this.props.gliss,useTouchEvents:_this.props.useTouchEvents,key:midiNumber},_this.props.disabled?null:_this.props.renderNoteLabel({isActive,isAccidental,midiNumber}))}))}}]);return Keyboard}(React.Component);_defineProperty(Keyboard$jscomp$0,"propTypes",{noteRange:function(props,propName,componentName){var _props$propName=
props[propName];props=_props$propName.first;_props$propName=_props$propName.last;if(!props||!_props$propName)return Error("Invalid prop ".concat(propName," supplied to ").concat(componentName,". ").concat(propName," must be an object with .first and .last values."));if(!(("number"!==typeof props?0:MidiNumbers.NATURAL_MIDI_NUMBERS.includes(props))&&("number"!==typeof _props$propName?0:MidiNumbers.NATURAL_MIDI_NUMBERS.includes(_props$propName))))return Error("Invalid prop ".concat(propName," supplied to ").concat(componentName,
". ").concat(propName," values must be valid MIDI numbers, and should not be accidentals (sharp or flat notes)."));if(props>=_props$propName)return Error("Invalid prop ".concat(propName," supplied to ").concat(componentName,". ").concat(propName,".first must be smaller than ").concat(propName,".last."))},activeNotes:global.arrayOf(global.number),onPlayNoteInput:global.func.isRequired,onStopNoteInput:global.func.isRequired,renderNoteLabel:global.func.isRequired,keyWidthToHeight:global.number.isRequired,
className:global.string,disabled:global.bool,gliss:global.bool,useTouchEvents:global.bool,width:global.number});_defineProperty(Keyboard$jscomp$0,"defaultProps",{disabled:!1,gliss:!1,useTouchEvents:!1,keyWidthToHeight:.33,renderNoteLabel:function(){}});var ControlledPiano=function(_React$Component){function ControlledPiano(){var _getPrototypeOf2;_classCallCheck(this,ControlledPiano);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,
(_getPrototypeOf2=_getPrototypeOf(ControlledPiano)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isMouseDown:!1,useTouchEvents:!1});_defineProperty(_assertThisInitialized(_this),"handleNoteChanges",function(_ref){var prevActiveNotes=_ref.prevActiveNotes;_ref=_ref.nextActiveNotes;if(!_this.props.disabled){var notesStopped=difference(prevActiveNotes,_ref);difference(_ref,prevActiveNotes).forEach(function(midiNumber){_this.props.playNote(midiNumber)});
notesStopped.forEach(function(midiNumber){_this.props.stopNote(midiNumber)})}});_defineProperty(_assertThisInitialized(_this),"getMidiNumberForKey",function(key){if(!_this.props.keyboardShortcuts)return null;var shortcut=_this.props.keyboardShortcuts.find(function(sh){return sh.key===key});return shortcut&&shortcut.midiNumber});_defineProperty(_assertThisInitialized(_this),"getKeyForMidiNumber",function(midiNumber){if(!_this.props.keyboardShortcuts)return null;var shortcut=_this.props.keyboardShortcuts.find(function(sh){return sh.midiNumber===
midiNumber});return shortcut&&shortcut.key});_defineProperty(_assertThisInitialized(_this),"onKeyDown",function(event){if(!(event.ctrlKey||event.metaKey||event.shiftKey)&&(event=_this.getMidiNumberForKey(event.key)))_this.onPlayNoteInput(event)});_defineProperty(_assertThisInitialized(_this),"onKeyUp",function(event){if(event=_this.getMidiNumberForKey(event.key))_this.onStopNoteInput(event)});_defineProperty(_assertThisInitialized(_this),"onPlayNoteInput",function(midiNumber){if(!_this.props.disabled)_this.props.onPlayNoteInput(midiNumber,
_this.props.activeNotes)});_defineProperty(_assertThisInitialized(_this),"onStopNoteInput",function(midiNumber){if(!_this.props.disabled)_this.props.onStopNoteInput(midiNumber,_this.props.activeNotes)});_defineProperty(_assertThisInitialized(_this),"onMouseDown",function(){_this.setState({isMouseDown:!0})});_defineProperty(_assertThisInitialized(_this),"onMouseUp",function(){_this.setState({isMouseDown:!1})});_defineProperty(_assertThisInitialized(_this),"onTouchStart",function(){_this.setState({useTouchEvents:!0})});
_defineProperty(_assertThisInitialized(_this),"renderNoteLabel",function(_ref2){var midiNumber=_ref2.midiNumber,isActive=_ref2.isActive;_ref2=_ref2.isAccidental;var keyboardShortcut=_this.getKeyForMidiNumber(midiNumber);return _this.props.renderNoteLabel({keyboardShortcut,midiNumber,isActive,isAccidental:_ref2})});return _this}_inherits(ControlledPiano,_React$Component);_createClass(ControlledPiano,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.onKeyDown);window.addEventListener("keyup",
this.onKeyUp)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown);window.removeEventListener("keyup",this.onKeyUp)}},{key:"componentDidUpdate",value:function(prevProps,prevState){this.props.activeNotes!==prevProps.activeNotes&&this.handleNoteChanges({prevActiveNotes:prevProps.activeNotes||[],nextActiveNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){return React.createElement("div",{style:{width:"100%",height:"100%"},onMouseDown:this.onMouseDown,
onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,"data-testid":"container"},React.createElement(Keyboard$jscomp$0,{noteRange:this.props.noteRange,onPlayNoteInput:this.onPlayNoteInput,onStopNoteInput:this.onStopNoteInput,activeNotes:this.props.activeNotes,className:this.props.className,disabled:this.props.disabled,width:this.props.width,keyWidthToHeight:this.props.keyWidthToHeight,gliss:this.state.isMouseDown,useTouchEvents:this.state.useTouchEvents,renderNoteLabel:this.renderNoteLabel}))}}]);
return ControlledPiano}(React.Component);_defineProperty(ControlledPiano,"propTypes",{noteRange:global.object.isRequired,activeNotes:global.arrayOf(global.number.isRequired).isRequired,playNote:global.func.isRequired,stopNote:global.func.isRequired,onPlayNoteInput:global.func.isRequired,onStopNoteInput:global.func.isRequired,renderNoteLabel:global.func.isRequired,className:global.string,disabled:global.bool,width:global.number,keyWidthToHeight:global.number,keyboardShortcuts:global.arrayOf(global.shape({key:global.string.isRequired,
midiNumber:global.number.isRequired}))});_defineProperty(ControlledPiano,"defaultProps",{renderNoteLabel:function(_ref3){var keyboardShortcut=_ref3.keyboardShortcut,isActive=_ref3.isActive;_ref3=_ref3.isAccidental;return keyboardShortcut?React.createElement("div",{className:classNames("ReactPiano__NoteLabel",{"ReactPiano__NoteLabel--active":isActive,"ReactPiano__NoteLabel--accidental":_ref3,"ReactPiano__NoteLabel--natural":!_ref3})},keyboardShortcut):null}});require=function(_React$Component){function Piano(){var _getPrototypeOf2;
_classCallCheck(this,Piano);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];var _this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Piano)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{activeNotes:_this.props.activeNotes||[]});_defineProperty(_assertThisInitialized(_this),"handlePlayNoteInput",function(midiNumber){_this.setState(function(prevState){if(_this.props.onPlayNoteInput)_this.props.onPlayNoteInput(midiNumber,
{prevActiveNotes:prevState.activeNotes});return prevState.activeNotes.includes(midiNumber)?null:{activeNotes:prevState.activeNotes.concat(midiNumber)}})});_defineProperty(_assertThisInitialized(_this),"handleStopNoteInput",function(midiNumber){_this.setState(function(prevState){if(_this.props.onStopNoteInput)_this.props.onStopNoteInput(midiNumber,{prevActiveNotes:_this.state.activeNotes});return{activeNotes:prevState.activeNotes.filter(function(note){return midiNumber!==note})}})});return _this}_inherits(Piano,
_React$Component);_createClass(Piano,[{key:"componentDidUpdate",value:function(prevProps){prevProps.activeNotes!==this.props.activeNotes&&this.state.activeNotes!==this.props.activeNotes&&this.setState({activeNotes:this.props.activeNotes||[]})}},{key:"render",value:function(){var _this$props=this.props;var excluded=["activeNotes","onPlayNoteInput","onStopNoteInput"];if(null==_this$props)_this$props={};else{if(null==_this$props)var target={};else{target={};var sourceKeys=Object.keys(_this$props),i;
for(i=0;i<sourceKeys.length;i++){var key=sourceKeys[i];0<=excluded.indexOf(key)||(target[key]=_this$props[key])}}if(Object.getOwnPropertySymbols)for(i=Object.getOwnPropertySymbols(_this$props),key=0;key<i.length;key++)sourceKeys=i[key],0<=excluded.indexOf(sourceKeys)||Object.prototype.propertyIsEnumerable.call(_this$props,sourceKeys)&&(target[sourceKeys]=_this$props[sourceKeys]);_this$props=target}return React.createElement(ControlledPiano,_extends({activeNotes:this.state.activeNotes,onPlayNoteInput:this.handlePlayNoteInput,
onStopNoteInput:this.handleStopNoteInput},_this$props))}}]);return Piano}(React.Component);_defineProperty(require,"propTypes",{noteRange:global.object.isRequired,activeNotes:global.arrayOf(global.number.isRequired),playNote:global.func.isRequired,stopNote:global.func.isRequired,onPlayNoteInput:global.func,onStopNoteInput:global.func,renderNoteLabel:global.func,className:global.string,disabled:global.bool,width:global.number,keyWidthToHeight:global.number,keyboardShortcuts:global.arrayOf(global.shape({key:global.string.isRequired,
midiNumber:global.number.isRequired}))});exports.ControlledPiano=ControlledPiano;exports.Piano=require;exports.Keyboard=Keyboard$jscomp$0;exports.KeyboardShortcuts={create:function(_ref){var lastNote=_ref.lastNote,keyboardConfig=_ref.keyboardConfig;_ref=_ref.firstNote;for(var naturalKeyIndex=0,keyboardShortcuts=[];naturalKeyIndex<keyboardConfig.length&&_ref<=lastNote;){var key=keyboardConfig[naturalKeyIndex];MidiNumbers.getAttributes(_ref).isAccidental?keyboardShortcuts.push({key:key.flat,midiNumber:_ref}):
(keyboardShortcuts.push({key:key.natural,midiNumber:_ref}),naturalKeyIndex+=1);_ref+=1}return keyboardShortcuts},BOTTOM_ROW:[{natural:"z",flat:"a",sharp:"s"},{natural:"x",flat:"s",sharp:"d"},{natural:"c",flat:"d",sharp:"f"},{natural:"v",flat:"f",sharp:"g"},{natural:"b",flat:"g",sharp:"h"},{natural:"n",flat:"h",sharp:"j"},{natural:"m",flat:"j",sharp:"k"},{natural:",",flat:"k",sharp:"l"},{natural:".",flat:"l",sharp:";"},{natural:"/",flat:";",sharp:"'"}],HOME_ROW:[{natural:"a",flat:"q",sharp:"w"},{natural:"s",
flat:"w",sharp:"e"},{natural:"d",flat:"e",sharp:"r"},{natural:"f",flat:"r",sharp:"t"},{natural:"g",flat:"t",sharp:"y"},{natural:"h",flat:"y",sharp:"u"},{natural:"j",flat:"u",sharp:"i"},{natural:"k",flat:"i",sharp:"o"},{natural:"l",flat:"o",sharp:"p"},{natural:";",flat:"p",sharp:"["},{natural:"'",flat:"[",sharp:"]"}],QWERTY_ROW:[{natural:"q",flat:"1",sharp:"2"},{natural:"w",flat:"2",sharp:"3"},{natural:"e",flat:"3",sharp:"4"},{natural:"r",flat:"4",sharp:"5"},{natural:"t",flat:"5",sharp:"6"},{natural:"y",
flat:"6",sharp:"7"},{natural:"u",flat:"7",sharp:"8"},{natural:"i",flat:"8",sharp:"9"},{natural:"o",flat:"9",sharp:"0"},{natural:"p",flat:"0",sharp:"-"},{natural:"[",flat:"-",sharp:"\x3d"}]};exports.MidiNumbers=MidiNumbers}
//# sourceMappingURL=module$node_modules$react_piano$dist$react_piano_cjs.js.map
