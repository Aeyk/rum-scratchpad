{
"version":3,
"file":"module$node_modules$$tonejs$piano$build$piano$Strings.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@tonejs/piano/build/piano/Strings.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$tonejs$piano$build$piano$Strings\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PianoStrings = void 0;\n\nvar _tone = require(\"tone\");\n\nvar _Component = require(\"./Component\");\n\nvar _Salamander = require(\"./Salamander\");\n\nvar _String = require(\"./String\");\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\n/**\n *  Manages all of the hammered string sounds\n */\nvar PianoStrings =\n/*#__PURE__*/\nfunction (_PianoComponent) {\n  _inherits(PianoStrings, _PianoComponent);\n\n  function PianoStrings(options) {\n    var _this;\n\n    _classCallCheck(this, PianoStrings);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PianoStrings).call(this, options));\n    var notes = (0, _Salamander.getNotesInRange)(options.minNote, options.maxNote);\n\n    var velocities = _Salamander.velocitiesMap[options.velocities].slice();\n\n    _this._strings = velocities.map(function (velocity) {\n      var string = new _String.PianoString(Object.assign(options, {\n        notes: notes,\n        velocity: velocity\n      }));\n      return string;\n    });\n    _this._activeNotes = new Map();\n    return _this;\n  }\n  /**\n   * Scale a value between a given range\n   */\n\n\n  _createClass(PianoStrings, [{\n    key: \"scale\",\n    value: function scale(val, inMin, inMax, outMin, outMax) {\n      return (val - inMin) / (inMax - inMin) * (outMax - outMin) + outMin;\n    }\n  }, {\n    key: \"triggerAttack\",\n    value: function triggerAttack(note, time, velocity) {\n      var scaledVel = this.scale(velocity, 0, 1, -0.5, this._strings.length - 0.51);\n      var stringIndex = Math.max(Math.round(scaledVel), 0);\n      var gain = 1 + scaledVel - stringIndex;\n\n      if (this._strings.length === 1) {\n        gain = velocity;\n      }\n\n      var sampler = this._strings[stringIndex];\n\n      if (this._activeNotes.has(note)) {\n        this.triggerRelease(note, time);\n      }\n\n      this._activeNotes.set(note, sampler);\n\n      sampler.triggerAttack((0, _tone.Midi)(note).toNote(), time, gain);\n    }\n  }, {\n    key: \"triggerRelease\",\n    value: function triggerRelease(note, time) {\n      // trigger the release of all of the notes at that velociy\n      if (this._activeNotes.has(note)) {\n        this._activeNotes.get(note).triggerRelease((0, _tone.Midi)(note).toNote(), time);\n\n        this._activeNotes[\"delete\"](note);\n      }\n    }\n  }, {\n    key: \"_internalLoad\",\n    value: function _internalLoad() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return Promise.all(this._strings.map(function (s) {\n                  return __awaiter(_this2, void 0, void 0,\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee() {\n                    return regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return s.load();\n\n                          case 2:\n                            s.connect(this.output);\n\n                          case 3:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee, this);\n                  }));\n                }));\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }]);\n\n  return PianoStrings;\n}(_Component.PianoComponent);\n\nexports.PianoStrings = PianoStrings;\n};"],
"names":["shadow$provide","global","require","module","exports","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","_possibleConstructorReturn","self","call","ReferenceError","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","TypeError","create","value","_setPrototypeOf","p","PianoStrings","_tone","_Component","_Salamander","_String","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","_PianoComponent","options","instance","_this","notes","getNotesInRange","minNote","maxNote","velocities","velocitiesMap","slice","_strings","map","velocity","string","PianoString","assign","_activeNotes","Map","scale","val","inMin","inMax","outMin","outMax","triggerAttack","note","time","scaledVel","stringIndex","Math","max","round","gain","sampler","has","triggerRelease","set","Midi","toNote","get","_internalLoad","regeneratorRuntime","mark","_callee2","_this2","wrap","_callee2$","_context2","prev","all","s","_callee","_callee$","_context","load","connect","output","stop","PianoComponent"]
}
