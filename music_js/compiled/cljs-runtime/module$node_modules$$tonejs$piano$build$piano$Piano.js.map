{
"version":3,
"file":"module$node_modules$$tonejs$piano$build$piano$Piano.js",
"lineCount":14,
"mappings":"AAAAA,cAAA,CAAe,mDAAf,CAAwE,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAkBhHC,QAASA,QAAO,CAACC,YAAD,CAAM,CAA6ED,OAAA,CAArD,UAAtB,GAAI,MAAOE,OAAX,EAA+D,QAA/D,GAAoC,MAAOA,OAAP,CAAcC,QAAlD,CAAqFH,QAAgB,CAACC,GAAD,CAAM,CAAE,MAAO,OAAOA,IAAhB,CAA3G,CAAsJD,QAAgB,CAACC,GAAD,CAAM,CAAE,MAAOA,IAAA,EAAyB,UAAzB,GAAO,MAAOC,OAAd,EAAuCD,GAAvC,CAA2CG,WAA3C,GAA2DF,MAA3D,EAAqED,GAArE,GAA6EC,MAA7E,CAAoFG,SAApF,CAAgG,QAAhG,CAA2G,MAAOJ,IAA3H,CAAqI,OAAOD,QAAA,CAAQC,YAAR,CAA1T,CAItBK,QAASA,kBAAiB,CAACC,MAAD,CAASC,KAAT,CAAgB,CAAE,IAAK,IAAIC,EAAI,CAAb,CAAgBA,CAAhB,CAAoBD,KAApB,CAA0BE,MAA1B,CAAkCD,CAAA,EAAlC,CAAuC,CAAE,IAAIE,WAAaH,KAAA,CAAMC,CAAN,CAAUE,WAAA,CAAWC,UAAX;AAAwBD,UAAxB,CAAmCC,UAAnC,EAAiD,CAAA,CAAOD,WAAA,CAAWE,YAAX,CAA0B,CAAA,CAAU,QAAJ,EAAeF,WAAf,GAA2BA,UAA3B,CAAsCG,QAAtC,CAAiD,CAAA,CAAjD,CAAuDC,OAAA,CAAOC,cAAP,CAAsBT,MAAtB,CAA8BI,UAA9B,CAAyCM,GAAzC,CAA8CN,UAA9C,CAA5K,CAAzC,CAE1CO,QAASA,aAAY,CAACC,WAAD,CAAcC,UAAd,CAA0BC,WAA1B,CAAuC,CAAMD,UAAJ,EAAgBd,iBAAA,CAAkBa,WAAlB,CAA8Bd,SAA9B,CAAyCe,UAAzC,CAA0DC,YAAJ,EAAiBf,iBAAA,CAAkBa,WAAlB,CAA+BE,WAA/B,CAA6C,OAAOF,YAA7I,CAM5DG,QAASA,gBAAe,CAACC,UAAD,CAAI,CAAED,eAAA,CAAkBP,MAAA,CAAOS,cAAP,CAAwBT,MAAxB,CAA+BU,cAA/B,CAAgDH,QAAwB,CAACC,CAAD,CAAI,CAAE,MAAOA,EAAP,CAASG,SAAT,EAAsBX,MAAA,CAAOU,cAAP,CAAsBF,CAAtB,CAAxB,CAAqD;MAAOD,gBAAA,CAAgBC,UAAhB,CAA5J,CAE5BI,QAASA,UAAS,CAACC,QAAD,CAAWC,UAAX,CAAuB,CAAE,GAA0B,UAA1B,GAAI,MAAOA,WAAX,EAAuD,IAAvD,GAAwCA,UAAxC,CAA+D,KAAM,KAAIC,SAAJ,CAAc,oDAAd,CAAN,CAA6EF,QAAA,CAASvB,SAAT,CAAqBU,MAAA,CAAOgB,MAAP,CAAcF,UAAd,EAA4BA,UAA5B,CAAuCxB,SAAvC,CAAkD,CAAED,YAAa,CAAE4B,MAAOJ,QAAT,CAAmBd,SAAU,CAAA,CAA7B,CAAmCD,aAAc,CAAA,CAAjD,CAAf,CAAlD,CAAiIgB,WAAJ,EAAgBI,eAAA,CAAgBL,QAAhB,CAA0BC,UAA1B,CAAhT,CAEzCI,QAASA,gBAAe,CAACV,UAAD,CAAIW,UAAJ,CAAO,CAAED,eAAA,CAAkBlB,MAAlB,CAAyBS,cAAzB,EAA2CS,QAAwB,CAACV,CAAD,CAAIW,CAAJ,CAAO,CAAEX,CAAA,CAAEG,SAAF,CAAcQ,CAAG,OAAOX,EAA1B,CAAgC;MAAOU,gBAAA,CAAgBV,UAAhB,CAAmBW,UAAnB,CAAnH,CA/B/BnB,MAAA,CAAOC,cAAP,CAAsBjB,OAAtB,CAA+B,YAA/B,CAA6C,CAC3CiC,MAAO,CAAA,CADoC,CAA7C,CAGAjC,QAAA,CAAQoC,KAAR,CAAgB,IAAK,EAErB,KAAIC,MAAQvC,OAAA,CAAQ,qCAAR,CAAZ,CAEIwC,WAAaxC,OAAA,CAAQ,yDAAR,CAFjB,CAIIyC,QAAUzC,OAAA,CAAQ,sDAAR,CAJd,CAMI0C,OAAS1C,OAAA,CAAQ,qDAAR,CANb,CAQI2C,SAAW3C,OAAA,CAAQ,uDAAR,CARf,CA4BI4C,UAA4C,QAAS,CAACC,OAAD,CAAUC,UAAV;AAAsBC,CAAtB,CAAyBC,SAAzB,CAAoC,CAC3FC,QAASA,MAAK,CAACd,KAAD,CAAQ,CACpB,MAAOA,MAAA,WAAiBY,EAAjB,CAAqBZ,KAArB,CAA6B,IAAIY,CAAJ,CAAM,QAAS,CAACG,OAAD,CAAU,CAC3DA,OAAA,CAAQf,KAAR,CAD2D,CAAzB,CADhB,CAMtB,MAAO,MAAKY,CAAL,GAAWA,CAAX,CAAeI,OAAf,GAAyB,QAAS,CAACD,OAAD,CAAUE,MAAV,CAAkB,CACzDC,QAASA,UAAS,CAAClB,KAAD,CAAQ,CACxB,GAAI,CACFmB,IAAA,CAAKN,SAAA,CAAUO,IAAV,CAAepB,KAAf,CAAL,CADE,CAEF,MAAOqB,CAAP,CAAU,CACVJ,MAAA,CAAOI,CAAP,CADU,CAHY,CAQ1BC,QAASA,SAAQ,CAACtB,KAAD,CAAQ,CACvB,GAAI,CACFmB,IAAA,CAAKN,SAAA,CAAU,OAAV,CAAA,CAAmBb,KAAnB,CAAL,CADE,CAEF,MAAOqB,CAAP,CAAU,CACVJ,MAAA,CAAOI,CAAP,CADU,CAHW,CAQzBF,QAASA,KAAI,CAACI,MAAD,CAAS,CACpBA,MAAA,CAAOC,IAAP,CAAcT,OAAA,CAAQQ,MAAR,CAAevB,KAAf,CAAd,CAAsCc,KAAA,CAAMS,MAAN,CAAavB,KAAb,CAAA,CAAoByB,IAApB,CAAyBP,SAAzB,CAAoCI,QAApC,CADlB,CAItBH,IAAA,CAAK,CAACN,SAAD,CAAaA,SAAA,CAAUa,KAAV,CAAgBhB,OAAhB,CAAyBC,UAAzB,EAAuC,EAAvC,CAAb,EAAyDS,IAAzD,EAAL,CArByD,CAApD,CAPoF,CAmCzFjB,OAAAA,CAEJ,QAAS,CAACwB,cAAD,CAAiB,CAGxBxB,QAASA,MAAK,EAAG,CAxD+B,GAAI,EA2DlCyB,IA3DkC;AA2D5BzB,KA3D4B,CAAJ,CAA0C,KAAM,KAAIL,SAAJ,CAAc,mCAAd,CAAN,CA6D/C,IAAA,MAAAR,eAAA,CAAgBa,KAAhB,CAAA,CAAuB0B,IAAvB,CAA4B,IAA5B,CAAkC,CAAC,CAAA,CAAGzB,KAAH,CAAS0B,oBAAV,EAAgC3B,KAAA,CAAM4B,WAAN,EAAhC,CAAqDC,SAArD,CAAlC,CAvDK,IAAIH,CAAAA,KAAJ,EAA+B,QAA/B,GAAa7D,OAAA,CAAQ6D,KAAR,CAAb,EAA2D,UAA3D,GAA2C,MAAOA,MAAlD,CAAA,CAEV,GAAa,IAAK,EAAlB,GAF0GI,IAE1G,CAAuB,KAAM,KAAIC,cAAJ,CAAmB,2DAAnB,CAAN,CAAyF,KAAA,CAFND,IAAhG,CAwD9CE,KAAA,CAAMC,IAAN,CAAa,OACbD,MAAA,CAAME,KAAN,CAAcC,IAAAA,EACdH,MAAA,CAAMI,MAAN,CAAe,IAAInC,KAAJ,CAAUoC,IAAV,CAAe,CAC5BC,QAASN,KAATM,CAAeA,OADa,CAAf,CAOfN,MAAA,CAAMO,UAAN,CAAmB,IAAIC,GAKvBR,MAAA,CAAMS,OAAN,CAAgB,CAAA,CAChB,KAAIC,QAAU,CAAC,CAAA,CAAGzC,KAAH,CAAS0B,oBAAV,EAAgC3B,KAAA,CAAM4B,WAAN,EAAhC;AAAqDC,SAArD,CAETa,QAAA,CAAQC,GAAR,CAAYC,QAAZ,CAAqB,GAArB,CAAL,GACEF,OADF,CACUC,GADV,EACiB,GADjB,CAIAX,MAAA,CAAMa,YAAN,CAAqBH,OAArB,CAA6BG,YAC7Bb,MAAA,CAAMO,UAAN,CAAmB,IAAIC,GACvBR,MAAA,CAAMc,eAAN,CAAwB,IAAIN,GAC5BR,MAAA,CAAMe,QAAN,CAAiB,CAAA,IAAI1C,QAAJ,CAAa2C,YAAb,CAA0BpE,MAAA,CAAOqE,MAAP,CAAc,EAAd,CAAkBP,OAAlB,CAA2B,CACpEQ,QAAS,CAAA,CAD2D,CAEpEC,QAAST,OAATS,CAAiBR,GAFmD,CAGpES,OAAQV,OAARU,CAAgBA,MAAhBA,CAAuBC,OAH6C,CAA3B,CAA1B,CAAA,EAIbC,OAJa,CAILtB,KAJK,CAICI,MAJD,CAKjBJ,MAAA,CAAMqB,OAAN,CAAgBrB,KAAhB,CAAsBe,QAAtB,CAA+BK,MAC/BpB,MAAA,CAAMuB,MAAN,CAAe,CAAA,IAAInD,MAAJ,CAAWoD,KAAX,CAAiB5E,MAAA,CAAOqE,MAAP,CAAc,EAAd,CAAkBP,OAAlB,CAA2B,CACzDQ,QAASR,OAATQ,CAAiBO,KADwC,CAEzDN,QAAST,OAATS,CAAiBR,GAFwC,CAGzDS,OAAQV,OAARU,CAAgBA,MAAhBA,CAAuBK,KAHkC,CAA3B,CAAjB,CAAA,EAIXH,OAJW,CAIHtB,KAJG,CAIGI,MAJH,CAKfJ,MAAA,CAAMyB,KAAN;AAAczB,KAAd,CAAoBuB,MAApB,CAA2BH,MAC3BpB,MAAA,CAAM0B,OAAN,CAAgB,CAAA,IAAIvD,OAAJ,CAAYwD,MAAZ,CAAmB/E,MAAA,CAAOqE,MAAP,CAAc,EAAd,CAAkBP,OAAlB,CAA2B,CAC5DQ,QAASR,OAATQ,CAAiBU,OAD2C,CAE5DT,QAAST,OAATS,CAAiBR,GAF2C,CAG5DS,OAAQV,OAARU,CAAgBA,MAAhBA,CAAuBS,MAHqC,CAA3B,CAAnB,CAAA,EAIZP,OAJY,CAIJtB,KAJI,CAIEI,MAJF,CAKhBJ,MAAA,CAAM6B,MAAN,CAAe7B,KAAf,CAAqB0B,OAArB,CAA6BN,MAC7BpB,MAAA,CAAM8B,UAAN,CAAmB,CAAA,IAAI5D,UAAJ,CAAe6D,SAAf,CAAyBnF,MAAA,CAAOqE,MAAP,CAAc,EAAd,CAAkBP,OAAlB,CAA2B,CACrEQ,QAASR,OAATQ,CAAiBU,OADoD,CAErET,QAAST,OAATS,CAAiBR,GAFoD,CAGrES,OAAQV,OAARU,CAAgBA,MAAhBA,CAAuBY,SAH8C,CAA3B,CAAzB,CAAA,EAIfV,OAJe,CAIPtB,KAJO,CAIDI,MAJC,CAKnBJ,MAAA,CAAMgC,SAAN,CAAkBhC,KAAlB,CAAwB8B,UAAxB,CAAmCV,MACnC,OAAOpB,MAtDQ,CAFjBxC,SAAA,CAAUQ,KAAV,CAAiBwB,cAAjB,CA2DAzC,aAAA,CAAaiB,KAAb,CAAoB,CAAC,CACnBlB,IAAK,MADc;AAMnBe,MAAOoE,QAAa,EAAG,CACrB,MAAO3D,UAAA,CAAU,IAAV,CAAgB,IAAK,EAArB,CAAwB,IAAK,EAA7B,CAEP4D,kBAAA,CAAmBC,IAAnB,CAAwBC,QAASA,QAAO,EAAG,CACzC,MAAOF,mBAAA,CAAmBG,IAAnB,CAAwBC,QAAiB,CAACC,QAAD,CAAW,CACzD,IAAA,CAAA,CAAA,CACE,OAAQA,QAAR,CAAiBC,IAAjB,CAAwBD,QAAxB,CAAiCtD,IAAjC,EACE,KAAK,CAAL,CAEE,MADAsD,SACO,CADEtD,IACF,CADS,CACT,CAAAJ,OAAA,CAAQ4D,GAAR,CAAY,CAAC,IAAA,CAAK1B,QAAL,CAAckB,IAAd,EAAD,CAAuB,IAAA,CAAKV,MAAL,CAAYU,IAAZ,EAAvB,CAA2C,IAAA,CAAKP,OAAL,CAAaO,IAAb,EAA3C,CAAgE,IAAA,CAAKH,UAAL,CAAgBG,IAAhB,EAAhE,CAAZ,CAET,MAAK,CAAL,CACE,IAAA,CAAKxB,OAAL,CAAe,CAAA,CAEjB,MAAK,CAAL,CACA,KAAK,KAAL,CACE,MAAO8B,SAAA,CAASG,IAAT,EAVX,CAFuD,CAApD,CAeJN,OAfI,CAeK,IAfL,CADkC,CAA3C,CAFO,CADc,CANJ,CAAD,CAgCjB,CACDtF,IAAK,WADJ,CAODe,MAAO8E,QAAkB,EAAG,CAAA,IAEtBC,WAD0B,CAAnBC,CAAAhD,SAAAgD,CAAUtG,MAAVsG,EAAyC1C,IAAAA,EAAzC0C,GAAwBhD,SAAA,CAAU,CAAV,CAAxBgD,CAAqDhD,SAAA,CAAU,CAAV,CAArDgD;AAAoE,EAC3ED,EAAiBE,IACjBA,UAAAA,CAAqB,IAAK,EAAnB,GAAAF,SAAA,CAAuB,IAAA,CAAKG,SAAL,EAAvB,CAA0CH,SAEjD,KAAJ,CAASI,MAAT,GACEF,SAEA,CAFO,IAAA,CAAKG,SAAL,CAAeH,SAAf,CAEP,CAAK,IAAA,CAAKvB,MAAL,CAAY2B,MAAZ,CAAmBJ,SAAnB,CAAL,EACE,IAAA,CAAKvB,MAAL,CAAY4B,IAAZ,CAAiBL,SAAjB,CAJJ,CAQA,OAAO,KAbmB,CAP3B,CAhCiB,CA0DjB,CACDhG,IAAK,SADJ,CAEDe,MAAOuF,QAAgB,EAAG,CACxB,IAAIC,OAAS,IAAb,CAGIC,YAD2B,CAAnBC,CAAA1D,SAAA0D,CAAUhH,MAAVgH,EAAyCpD,IAAAA,EAAzCoD,GAAwB1D,SAAA,CAAU,CAAV,CAAxB0D,CAAqD1D,SAAA,CAAU,CAAV,CAArD0D,CAAoE,EAC5ED,EAAmBR,IACnBA,WAAAA,CAAsB,IAAK,EAApB,GAAAQ,UAAA,CAAwB,IAAA,CAAKP,SAAL,EAAxB,CAA2CO,UAEtD,IAAI,IAAJ,CAASN,MAAT,CAAiB,CACf,IAAIQ,QAAU,IAAA,CAAKP,SAAL,CAAeH,UAAf,CAEV,KAAA,CAAKvB,MAAL,CAAY2B,MAAZ,CAAmBM,OAAnB,CAAJ,GACE,IAAA,CAAKjC,MAAL,CAAYkC,EAAZ,CAAeD,OAAf,CASA,CANA,IAAA,CAAK1C,eAAL,CAAqB4C,OAArB,CAA6B,QAAS,CAACC,CAAD;AAAIC,IAAJ,CAAU,CACzCP,MAAA,CAAO9C,UAAP,CAAkBsD,GAAlB,CAAsBD,IAAtB,CAAL,EACEP,MAAA,CAAOtC,QAAP,CAAgB+C,cAAhB,CAA+BF,IAA/B,CAAqCJ,OAArC,CAF4C,CAAhD,CAMA,CAAA,IAAA,CAAK1C,eAAL,CAAqBiD,KAArB,EAVF,CAHe,CAiBjB,MAAO,KAxBiB,CAFzB,CA1DiB,CA6FjB,CACDjH,IAAK,SADJ,CAEDe,MAAOmG,QAAgB,CAACC,KAAD,CAAQ,CAAA,IACzBL,KAAOK,KAAPL,CAAaA,IADY,CAEzBM,KAAOD,KAAPC,CAAaA,IAFY,CAGzBC,WAAaF,KAAbE,CAAmBrB,IACnBA,WAAAA,CAAsB,IAAK,EAApB,GAAAqB,UAAA,CAAwB,IAAA,CAAKpB,SAAL,EAAxB,CAA2CoB,UAClDC,MAAAA,CAAiBH,KAAjBG,CAAuBC,QACvBA,MAAAA,CAA8B,IAAK,EAAxB,GAAAD,KAAA,CAA4B,EAA5B,CAAkCA,KAE7C,KAAJ,CAASpB,MAAT,EAAmB,IAAnB,CAAwBnC,YAAxB,CAAuC,IAAvC,CAA4CN,UAA5C,CAAuD+D,IAAvD,CAA8D,IAA9D,CAAmExD,eAAnE,CAAmFwD,IAAnF,EACExB,UAMA,CANO,IAAA,CAAKG,SAAL,CAAeH,UAAf,CAMP,CAJI,CAAC,CAAA,CAAG7E,KAAH,CAASsG,QAAV,EAAoBX,IAApB,CAIJ,GAHEM,IAGF,CAHSM,IAAA,CAAKC,KAAL,CAAW,CAAC,CAAA,CAAGxG,KAAH,CAASyG,IAAV,EAAgBd,IAAhB,CAAA,CAAsBe,MAAtB,EAAX,CAGT;AAAK,IAAA,CAAKpE,UAAL,CAAgBsD,GAAhB,CAAoBK,IAApB,CAAL,GAEE,IAAA,CAAK3D,UAAL,CAAgBqE,GAAhB,CAAoBV,IAApB,CAA0B,CACxBpB,KAAMA,UADkB,CAExBuB,SAAUA,KAFc,CAA1B,CAKA,CAAA,IAAA,CAAKtD,QAAL,CAAc8D,aAAd,CAA4BX,IAA5B,CAAkCpB,UAAlC,CAAwCuB,KAAxC,CAPF,CAPF,EAiBES,OAAA,CAAQC,IAAR,CAAa,oBAAb,CAGF,OAAO,KA5BsB,CAF9B,CA7FiB,CAiIjB,CACDjI,IAAK,OADJ,CAEDe,MAAOmH,QAAc,CAACC,KAAD,CAAQ,CAAA,IACvBrB,KAAOqB,KAAPrB,CAAaA,IADU,CAEvBM,KAAOe,KAAPf,CAAaA,IAFU,CAGvBgB,WAAaD,KAAbC,CAAmBpC,IACnBA,WAAAA,CAAsB,IAAK,EAApB,GAAAoC,UAAA,CAAwB,IAAA,CAAKnC,SAAL,EAAxB,CAA2CmC,UAClDC,MAAAA,CAAiBF,KAAjBE,CAAuBd,QACvBA,MAAAA,CAA8B,IAAK,EAAxB,GAAAc,KAAA,CAA4B,EAA5B,CAAkCA,KAE7C,KAAJ,CAASnC,MAAT,GACEF,UAMA,CANO,IAAA,CAAKG,SAAL,CAAeH,UAAf,CAMP,CAJI,CAAC,CAAA,CAAG7E,KAAH,CAASsG,QAAV,EAAoBX,IAApB,CAIJ,GAHEM,IAGF,CAHSM,IAAA,CAAKC,KAAL,CAAW,CAAC,CAAA,CAAGxG,KAAH,CAASyG,IAAV,EAAgBd,IAAhB,CAAA,CAAsBe,MAAtB,EAAX,CAGT;AAAI,IAAA,CAAKpE,UAAL,CAAgBsD,GAAhB,CAAoBK,IAApB,CAAJ,GACMkB,IAwBJ,CAxBe,IAAA,CAAK7E,UAAL,CAAgB8E,GAAhB,CAAoBnB,IAApB,CAwBf,CAtBA,IAAA,CAAK3D,UAAL,CAAgB,QAAhB,CAAA,CAA0B2D,IAA1B,CAsBA,CAhBAoB,IAgBA,CAhBad,IAAA,CAAKe,GAAL,CADI,CACJ,CAHEf,IAAAgB,CAAKC,GAALD,CAAShB,IAAA,CAAKe,GAAL,CAASzC,UAAT,CAAgBsC,IAAhB,CAAyBtC,IAAzB,CAA+B,EAA/B,CAAT0C,CAA8C,EAA9CA,CAGF,CAFCJ,IAED,CAFUf,QAEV,CAD6BA,KAC7B,CAAqB,EAArB,CAgBb,CAfAiB,IAeA,CAfad,IAAA,CAAKkB,GAAL,CAASJ,IAAT,CAAqB,CAArB,CAeb,CAbI,IAAA,CAAK/D,MAAL,CAAY2B,MAAZ,CAAmBJ,UAAnB,CAAJ,CACO,IAAA,CAAKhC,eAAL,CAAqB+C,GAArB,CAAyBK,IAAzB,CADP,EAEI,IAAA,CAAKpD,eAAL,CAAqB8D,GAArB,CAAyBV,IAAzB,CAA+BpB,UAA/B,CAFJ,EAME,IAAA,CAAK/B,QAAL,CAAc+C,cAAd,CAA6BI,IAA7B,CAAmCpB,UAAnC,CAGA,CAAA,IAAA,CAAKhB,UAAL,CAAgB+C,aAAhB,CAA8BX,IAA9B,CAAoCpB,UAApC,CAA0CwC,IAA1C,CATF,CAaA,CAAA,IAAA,CAAK5D,OAAL,CAAaiE,KAAb,CAAmBzB,IAAnB,CAAyBpB,UAAzB,CAA+BuB,KAA/B,CAzBF,CAPF,CAoCA,OAAO,KA5CoB,CAF5B,CAjIiB,CAiLjB,CACDvH,IAAK,SADJ,CAEDe,MAAO+H,QAAgB,EAAG,CACxB,IAAIC;AAAS,IAEb,KAAA,CAAKzC,OAAL,EAEA,KAAA,CAAK7C,UAAL,CAAgBmD,OAAhB,CAAwB,QAAS,CAACoC,CAAD,CAAI5B,IAAJ,CAAU,CACzC2B,MAAA,CAAOb,KAAP,CAAa,CACLd,IADK,CAAb,CADyC,CAA3C,CAMA,OAAO,KAXiB,CAFzB,CAjLiB,CAgMjB,CACDpH,IAAK,QADJ,CAEDuI,IAAKA,QAAY,EAAG,CAClB,MAAO,KAAP,CAAY5E,OADM,CAFnB,CAhMiB,CAApB,CAqMI,CAAC,CACH3D,IAAK,aADF,CAEHe,MAAO+B,QAAoB,EAAG,CAC5B,MAAOhD,OAAA,CAAOqE,MAAP,CAAchD,KAAA,CAAM8H,aAAN,CAAoBnG,WAApB,EAAd,CAAiD,CACtDoG,QAAS,GAD6C,CAEtDC,QAAS,EAF6C,CAGtDxE,MAAO,CAAA,CAH+C,CAItDG,QAAS,CAAA,CAJ6C,CAKtDjB,IAAK,wCALiD,CAMtDuF,WAAY,CAN0C,CAOtDrF,aAAc,EAPwC,CAQtDO,OAAQ,CACNY,UAAW,CADL,CAENH,OAAQ,CAFF,CAGNJ,MAAO,CAHD,CAINJ,QAAS,CAJH,CAR8C,CAAjD,CADqB,CAF3B,CAAD,CArMJ,CA0NA,OAAOrD,MAtRiB,CAA1B,CAuREC,KAvRF,CAuRQ8H,aAvRR,CAyRAnK,QAAA,CAAQoC,KAAR,CAAgBA,MAlWgG;",
"sources":["node_modules/@tonejs/piano/build/piano/Piano.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$tonejs$piano$build$piano$Piano\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Piano = void 0;\n\nvar _tone = require(\"tone\");\n\nvar _Harmonics = require(\"./Harmonics\");\n\nvar _Keybed = require(\"./Keybed\");\n\nvar _Pedal = require(\"./Pedal\");\n\nvar _Strings = require(\"./Strings\");\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar __awaiter = void 0 && (void 0).__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\n/**\n *  The Piano\n */\nvar Piano =\n/*#__PURE__*/\nfunction (_ToneAudioNode) {\n  _inherits(Piano, _ToneAudioNode);\n\n  function Piano() {\n    var _this;\n\n    _classCallCheck(this, Piano);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Piano).call(this, (0, _tone.optionsFromArguments)(Piano.getDefaults(), arguments)));\n    _this.name = 'Piano';\n    _this.input = undefined;\n    _this.output = new _tone.Gain({\n      context: _this.context\n    });\n    /**\n     * The currently held notes\n     */\n\n    _this._heldNotes = new Map();\n    /**\n     * If it's loaded or not\n     */\n\n    _this._loaded = false;\n    var options = (0, _tone.optionsFromArguments)(Piano.getDefaults(), arguments); // make sure it ends with a /\n\n    if (!options.url.endsWith('/')) {\n      options.url += '/';\n    }\n\n    _this.maxPolyphony = options.maxPolyphony;\n    _this._heldNotes = new Map();\n    _this._sustainedNotes = new Map();\n    _this._strings = new _Strings.PianoStrings(Object.assign({}, options, {\n      enabled: true,\n      samples: options.url,\n      volume: options.volume.strings\n    })).connect(_this.output);\n    _this.strings = _this._strings.volume;\n    _this._pedal = new _Pedal.Pedal(Object.assign({}, options, {\n      enabled: options.pedal,\n      samples: options.url,\n      volume: options.volume.pedal\n    })).connect(_this.output);\n    _this.pedal = _this._pedal.volume;\n    _this._keybed = new _Keybed.Keybed(Object.assign({}, options, {\n      enabled: options.release,\n      samples: options.url,\n      volume: options.volume.keybed\n    })).connect(_this.output);\n    _this.keybed = _this._keybed.volume;\n    _this._harmonics = new _Harmonics.Harmonics(Object.assign({}, options, {\n      enabled: options.release,\n      samples: options.url,\n      volume: options.volume.harmonics\n    })).connect(_this.output);\n    _this.harmonics = _this._harmonics.volume;\n    return _this;\n  }\n\n  _createClass(Piano, [{\n    key: \"load\",\n\n    /**\n     *  Load all the samples\n     */\n    value: function load() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Promise.all([this._strings.load(), this._pedal.load(), this._keybed.load(), this._harmonics.load()]);\n\n              case 2:\n                this._loaded = true;\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     * If all the samples are loaded or not\n     */\n\n  }, {\n    key: \"pedalDown\",\n\n    /**\n     *  Put the pedal down at the given time. Causes subsequent\n     *  notes and currently held notes to sustain.\n     */\n    value: function pedalDown() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$time = _ref.time,\n          time = _ref$time === void 0 ? this.immediate() : _ref$time;\n\n      if (this.loaded) {\n        time = this.toSeconds(time);\n\n        if (!this._pedal.isDown(time)) {\n          this._pedal.down(time);\n        }\n      }\n\n      return this;\n    }\n    /**\n     *  Put the pedal up. Dampens sustained notes\n     */\n\n  }, {\n    key: \"pedalUp\",\n    value: function pedalUp() {\n      var _this2 = this;\n\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$time = _ref2.time,\n          time = _ref2$time === void 0 ? this.immediate() : _ref2$time;\n\n      if (this.loaded) {\n        var seconds = this.toSeconds(time);\n\n        if (this._pedal.isDown(seconds)) {\n          this._pedal.up(seconds); // dampen each of the notes\n\n\n          this._sustainedNotes.forEach(function (t, note) {\n            if (!_this2._heldNotes.has(note)) {\n              _this2._strings.triggerRelease(note, seconds);\n            }\n          });\n\n          this._sustainedNotes.clear();\n        }\n      }\n\n      return this;\n    }\n    /**\n     *  Play a note.\n     *  @param note\t  The note to play. If it is a number, it is assumed to be MIDI\n     *  @param velocity  The velocity to play the note\n     *  @param time\t  The time of the event\n     */\n\n  }, {\n    key: \"keyDown\",\n    value: function keyDown(_ref3) {\n      var note = _ref3.note,\n          midi = _ref3.midi,\n          _ref3$time = _ref3.time,\n          time = _ref3$time === void 0 ? this.immediate() : _ref3$time,\n          _ref3$velocity = _ref3.velocity,\n          velocity = _ref3$velocity === void 0 ? 0.8 : _ref3$velocity;\n\n      if (this.loaded && this.maxPolyphony > this._heldNotes.size + this._sustainedNotes.size) {\n        time = this.toSeconds(time);\n\n        if ((0, _tone.isString)(note)) {\n          midi = Math.round((0, _tone.Midi)(note).toMidi());\n        }\n\n        if (!this._heldNotes.has(midi)) {\n          // record the start time and velocity\n          this._heldNotes.set(midi, {\n            time: time,\n            velocity: velocity\n          });\n\n          this._strings.triggerAttack(midi, time, velocity);\n        }\n      } else {\n        console.warn('samples not loaded');\n      }\n\n      return this;\n    }\n    /**\n     *  Release a held note.\n     */\n\n  }, {\n    key: \"keyUp\",\n    value: function keyUp(_ref4) {\n      var note = _ref4.note,\n          midi = _ref4.midi,\n          _ref4$time = _ref4.time,\n          time = _ref4$time === void 0 ? this.immediate() : _ref4$time,\n          _ref4$velocity = _ref4.velocity,\n          velocity = _ref4$velocity === void 0 ? 0.8 : _ref4$velocity;\n\n      if (this.loaded) {\n        time = this.toSeconds(time);\n\n        if ((0, _tone.isString)(note)) {\n          midi = Math.round((0, _tone.Midi)(note).toMidi());\n        }\n\n        if (this._heldNotes.has(midi)) {\n          var prevNote = this._heldNotes.get(midi);\n\n          this._heldNotes[\"delete\"](midi); // compute the release velocity\n\n\n          var holdTime = Math.pow(Math.max(time - prevNote.time, 0.1), 0.7);\n          var prevVel = prevNote.velocity;\n          var dampenGain = 3 / holdTime * prevVel * velocity;\n          dampenGain = Math.max(dampenGain, 0.4);\n          dampenGain = Math.min(dampenGain, 4);\n\n          if (this._pedal.isDown(time)) {\n            if (!this._sustainedNotes.has(midi)) {\n              this._sustainedNotes.set(midi, time);\n            }\n          } else {\n            // release the string sound\n            this._strings.triggerRelease(midi, time); // trigger the harmonics sound\n\n\n            this._harmonics.triggerAttack(midi, time, dampenGain);\n          } // trigger the keybed release sound\n\n\n          this._keybed.start(midi, time, velocity);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"stopAll\",\n    value: function stopAll() {\n      var _this3 = this;\n\n      this.pedalUp();\n\n      this._heldNotes.forEach(function (_, midi) {\n        _this3.keyUp({\n          midi: midi\n        });\n      });\n\n      return this;\n    }\n  }, {\n    key: \"loaded\",\n    get: function get() {\n      return this._loaded;\n    }\n  }], [{\n    key: \"getDefaults\",\n    value: function getDefaults() {\n      return Object.assign(_tone.ToneAudioNode.getDefaults(), {\n        maxNote: 108,\n        minNote: 21,\n        pedal: true,\n        release: false,\n        url: 'https://tambien.github.io/Piano/audio/',\n        velocities: 1,\n        maxPolyphony: 32,\n        volume: {\n          harmonics: 0,\n          keybed: 0,\n          pedal: 0,\n          strings: 0\n        }\n      });\n    }\n  }]);\n\n  return Piano;\n}(_tone.ToneAudioNode);\n\nexports.Piano = Piano;\n};"],
"names":["shadow$provide","global","require","module","exports","_typeof","obj","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","TypeError","create","value","_setPrototypeOf","p","Piano","_tone","_Harmonics","_Keybed","_Pedal","_Strings","__awaiter","thisArg","_arguments","P","generator","adopt","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","_ToneAudioNode","instance","call","optionsFromArguments","getDefaults","arguments","self","ReferenceError","_this","name","input","undefined","output","Gain","context","_heldNotes","Map","_loaded","options","url","endsWith","maxPolyphony","_sustainedNotes","_strings","PianoStrings","assign","enabled","samples","volume","strings","connect","_pedal","Pedal","pedal","_keybed","Keybed","release","keybed","_harmonics","Harmonics","harmonics","load","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","all","stop","pedalDown","_ref$time","_ref","time","immediate","loaded","toSeconds","isDown","down","pedalUp","_this2","_ref2$time","_ref2","seconds","up","forEach","t","note","has","triggerRelease","clear","keyDown","_ref3","midi","_ref3$time","_ref3$velocity","velocity","size","isString","Math","round","Midi","toMidi","set","triggerAttack","console","warn","keyUp","_ref4","_ref4$time","_ref4$velocity","prevNote","get","dampenGain","max","holdTime","pow","min","start","stopAll","_this3","_","ToneAudioNode","maxNote","minNote","velocities"]
}
